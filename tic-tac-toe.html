<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe - Joe's Games</title>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <header>
        <h1>Tic-Tac-Toe</h1>
    </header>
    <Nav>
        <ul>
            <li><a href="./index.html">Home</a></li>
            <li><a href="./lightswitch.html">Lightswitch</a></li>
            <li><a href="./tic-tac-toe.html" aria-current="page" class="currentpage">Tic-Tac-Toe</a></li>
            <li><a href="./mastermind.html">Mastermind</a></li>
            <li><a href="./about.html">About</a></li>
        </ul>
    </Nav>
    <main>
        <!-- leaderboard for consecutive wins -->
         <!-- vs computer or vs human. computer does a random spot that is free each round -->
        <table class="tic-tac-toe-table" border="1">
            <caption id="ticTacToeGameTitle">Tic-Tac-Toe: playerOne's turn.</caption>
            <tr>
                <th class="tic-tac-toe-panel" id="ticTacToe_0"></th>
                <th class="tic-tac-toe-panel" id="ticTacToe_1"></th>
                <th class="tic-tac-toe-panel" id="ticTacToe_2"></th>
            </tr>
            <tr>
                <th class="tic-tac-toe-panel" id="ticTacToe_3"></th>
                <th class="tic-tac-toe-panel" id="ticTacToe_4"></th>
                <th class="tic-tac-toe-panel" id="ticTacToe_5"></th>
            </tr>
            <tr>
                <th class="tic-tac-toe-panel" id="ticTacToe_6"></th>
                <th class="tic-tac-toe-panel" id="ticTacToe_7"></th>
                <th class="tic-tac-toe-panel" id="ticTacToe_8"></th>
            </tr>
        </table>
        <script>
            let ticTacToeArray = []
            for (i = 0; i < 9; i++){
                ticTacToeArray[i] = document.getElementById(`ticTacToe_${i}`)
                ticTacToeArray[i].addEventListener("click", function(){clickTicTacToe(this)})
            }
            let winningCombos = ["012","036","048","147","246","258","345","678"];
            let playerOneTiles = [];
            let playerTwoTiles = [];
            let playerOneName = "";
            let playerTwoName = "";
            let currentPlayerTurn = "playerOne"
            let clickedTile
            let comboChecker = 0;
            let winner = "";
            let gameTitle = document.getElementById("ticTacToeGameTitle");

            function clickTicTacToe(ticTacPanel){
                clickedTile = ticTacPanel.id.charAt(10)
                if (ticTacPanel.textContent == "" && winner == ""){
                    if (currentPlayerTurn == "playerOne"){
                        playerOneTiles[clickedTile] = clickedTile;
                        ticTacPanel.textContent = "X";
                        checkWin(playerOneTiles);
                        if (winner == ""){
                            currentPlayerTurn = "playerTwo";
                            gameTitle.textContent = `Tic-Tac-Toe: ${currentPlayerTurn}'s turn.`
                        }
                    }
                    else {
                        playerTwoTiles[clickedTile] = clickedTile;
                        ticTacPanel.textContent = "O";
                        checkWin(playerTwoTiles);
                        if (winner == ""){
                            currentPlayerTurn = "playerOne";
                            gameTitle.textContent = `Tic-Tac-Toe: ${currentPlayerTurn}'s turn.`
                        }
                    }
                }
            }

            function checkWin(playerTiles){
                 for (let combo of winningCombos){
                    comboChecker = 0;
                    for (i = 0; i < 3; i++){
                        // console.log(`playerOneTiles is ${playerTiles} the current digit of combo ${combo} is ${combo.charAt(i)}`)
                        if (playerTiles.indexOf(combo.charAt(i)) > -1){
                            comboChecker++
                        }
                        else{
                            comboChecker = 0;
                            break;
                        }
                        // console.log(`combo checked. i is ${i}. ${currentPlayerTurn}'s combo is ${comboChecker}.`)
                    }
                    if (comboChecker == 3){
                        winner = currentPlayerTurn;
                        gameTitle.textContent = `${winner} is the winner!!`;
                        break;
                    }
                }
            }
        </script>
        <h2 class="Under Construction">This page is under construction!!</h2>
        <p>This is a temporary page for testing. This will eventually be the home of <a href="https://en.wikipedia.org/wiki/Tic-tac-toe">Tic-Tac-Toe</a>.</p>
        <p>There will eventually be a form that asks each player for their name, and it will say "____'s turn". There will also be a radial button choice of playing against a human or a computer opponent.</p>
        <p>The game can be played in its current state, but it has generic names for each player. You also must refresh to do a new game.</p>
</body>
</html>